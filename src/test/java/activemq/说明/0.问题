https://blog.csdn.net/qq_28009065/article/details/79860610

https://blog.csdn.net/w372426096/article/details/90609220

存储数据的临时文件到达上限，生产者阻塞，消费者可以正常链接但不能消费或者消费速度极慢然后突然停止，整个系统可连接但是不能提供服务，挂掉

解决方案：尽量不要用非持久化消息，非要用的话，将临时文件限制尽可能的调大。


topic中不会做消息的存储 没有订阅者消息会放弃

            topic                           queue
持久化         无                   会在服务器上以文件格式保存 位置 $AMQ_HOME/data/kahadb 也可以设置成DB存储
完整性         不能保证                保证每条数据都能被消费者接收到，消息如果超时 数据会进入死性队列
消息丢失    没有订阅者情况下会丢失         不超时没事，超时会丢失

=====================持久化
默认是存在内存中的，当内存容量不足时或activemq正常关闭时，会将内存中位处理的数据持久化到磁盘，具体的持久化策略由配置文件中的配置决定
默认kahadb
自定义设置：conf/activemq.xml 中配置 配置信息在 broker标签内部


----------------kahadb
kahadb:[文件形数据库，使用内存+文件保证数据持久化][可以限制每个文件的大小[配置]]
    日志形式存储消息
    消息索引以B-Tree结构存储，可以快速更新
    完全支持JMS事物
    支持多种恢复机制

kahadb下的文件信息
eg: db.1.log 二进制文件
    db.data 数据文件
    db.redo 反向操作，容错
    lock    锁信息

----------------jdbc
jdbc下可以使用任意的数据库
eg:mysql

